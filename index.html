<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Darts PRO | Sree</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #00ff88; --bg: #000; --surf: #0a0a0a; --text: #fff; --dim: #666; --border: #1a1a1a; --danger: #ff4444; }
        [data-theme="light"] { --bg: #f5f5f7; --surf: #fff; --text: #1d1d1f; --dim: #86868b; --border: #e0e0e0; --accent: #00bd65; }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
        body, html { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; height: 100vh; overflow: hidden; }
        .app-container { height: 100%; display: flex; flex-direction: column; padding: 10px; }
        .screen { display: none; flex-direction: column; height: 100%; }
        .screen.active { display: flex; }

        /* Navigation */
        .top-nav { display: flex; justify-content: space-between; align-items: center; padding: 10px; }
        .nav-btn { width: 40px; height: 40px; background: var(--surf); border-radius: 10px; border: 1px solid var(--border); color: var(--text); display: flex; align-items: center; justify-content: center; cursor: pointer; }

        /* Branding */
        .hero { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
        .hero h1 { font-size: 3.5rem; font-weight: 900; letter-spacing: -2px; }
        .hero h1 span { color: var(--accent); }

        /* CRICKET REDESIGN */
        .game-layout { display: flex; flex-direction: row; align-items: center; justify-content: space-between; flex-grow: 1; width: 100%; gap: 5px; }
        
        /* Side Columns */
        .side-col { width: 18%; display: flex; flex-direction: column; gap: 4px; align-items: center; opacity: 0.3; transition: 0.3s; }
        .side-col.active { opacity: 1; transform: scale(1.05); }
        .p-name { font-size: 0.6rem; font-weight: 800; color: var(--dim); text-align: center; width: 100%; overflow: hidden; }
        .p-total { font-size: 1.4rem; font-weight: 900; color: var(--accent); margin-bottom: 5px; }
        
        .cricket-mark { width: 100%; height: 32px; background: var(--surf); border: 1px solid var(--border); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 1.1rem; position: relative; }
        .mark-num { font-size: 0.5rem; color: var(--dim); margin-top: 2px; }

        /* Center Board */
        .board-box { width: 62%; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        #board-svg { width: 100%; max-height: 40vh; }
        .db-seg-even { fill: #111; stroke: #222; stroke-width: 0.2; }
        .db-seg-odd { fill: #050505; stroke: #222; stroke-width: 0.2; }
        .db-red { fill: #8b0000; }
        .db-green { fill: #004d2c; }
        .db-highlight { fill: var(--accent) !important; }
        .db-text { fill: #555; font-size: 6px; font-weight: 700; pointer-events: none; }

        /* Bottom Controls */
        .bottom-ui { padding: 15px 0; display: flex; flex-direction: column; gap: 10px; }
        .score-strip { display: flex; gap: 8px; justify-content: center; }
        .dart { width: 55px; height: 45px; background: var(--surf); border: 1px solid var(--border); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 900; color: var(--accent); }
        .miss { width: 55px; height: 45px; background: var(--danger); border-radius: 8px; border: none; color: #fff; font-size: 0.6rem; font-weight: 900; cursor: pointer; }
        .btn-main { width: 100%; padding: 18px; background: var(--accent); color: #000; border: none; border-radius: 12px; font-weight: 900; text-transform: uppercase; cursor: pointer; }
        .undo { text-align: center; color: var(--dim); font-size: 0.7rem; text-transform: uppercase; cursor: pointer; padding: 5px; }

        /* Inputs */
        .input-box { width: 100%; padding: 15px; background: var(--surf); border: 1px solid var(--border); color: #fff; border-radius: 10px; text-align: center; margin-bottom: 10px; font-weight: 700; }
    </style>
</head>
<body>

<div class="app-container">
    <div class="top-nav">
        <div class="nav-btn" onclick="location.reload()">üè†</div>
        <div style="font-size: 0.6rem; letter-spacing: 2px; color: var(--dim);">CRICKET PRO</div>
        <div class="nav-btn" id="t-toggle" onclick="toggleTheme()">üåô</div>
    </div>

    <div id="scr-home" class="screen active">
        <div class="hero"><h1>Darts <span>PRO</span></h1><p style="letter-spacing:4px; font-size:0.7rem; color:var(--dim)">BY SREE</p></div>
        <button class="btn-main" onclick="nav('scr-setup')">New Game</button>
    </div>

    <div id="scr-setup" class="screen">
        <div class="hero"><p style="color:var(--accent); font-weight:800; margin-bottom:20px;">CRICKET MODE</p>
            <input type="text" id="p1-in" class="input-box" placeholder="PLAYER 1 NAME">
            <input type="text" id="p2-in" class="input-box" placeholder="PLAYER 2 NAME">
        </div>
        <button class="btn-main" onclick="startCricket()">Start Match</button>
    </div>

    <div id="scr-cricket" class="screen">
        <div class="game-layout">
            <div id="col-0" class="side-col">
                <div id="name-0" class="p-name">P1</div>
                <div id="pts-0" class="p-total">0</div>
                <div class="mark-num">20</div><div id="m0-20" class="cricket-mark">-</div>
                <div class="mark-num">19</div><div id="m0-19" class="cricket-mark">-</div>
                <div class="mark-num">18</div><div id="m0-18" class="cricket-mark">-</div>
                <div class="mark-num">17</div><div id="m0-17" class="cricket-mark">-</div>
                <div class="mark-num">16</div><div id="m0-16" class="cricket-mark">-</div>
                <div class="mark-num">15</div><div id="m0-15" class="cricket-mark">-</div>
                <div class="mark-num">B</div><div id="m0-25" class="cricket-mark">-</div>
            </div>

            <div class="board-box">
                <svg id="board-svg" viewBox="0 0 200 200">
                    <circle cx="100" cy="100" r="98" fill="#fff"/>
                    <g id="segments"></g>
                    <circle id="s25" cx="100" cy="100" r="12" class="db-green" onclick="hit(25, 1)"/>
                    <circle id="d25" cx="100" cy="100" r="6" class="db-red" onclick="hit(25, 2)"/>
                </svg>
            </div>

            <div id="col-1" class="side-col">
                <div id="name-1" class="p-name">P2</div>
                <div id="pts-1" class="p-total">0</div>
                <div class="mark-num">20</div><div id="m1-20" class="cricket-mark">-</div>
                <div class="mark-num">19</div><div id="m1-19" class="cricket-mark">-</div>
                <div class="mark-num">18</div><div id="m1-18" class="cricket-mark">-</div>
                <div class="mark-num">17</div><div id="m1-17" class="cricket-mark">-</div>
                <div class="mark-num">16</div><div id="m1-16" class="cricket-mark">-</div>
                <div class="mark-num">15</div><div id="m1-15" class="cricket-mark">-</div>
                <div class="mark-num">B</div><div id="m1-25" class="cricket-mark">-</div>
            </div>
        </div>

        <div class="bottom-ui">
            <div class="score-strip">
                <div id="d0" class="dart">-</div><div id="d1" class="dart">-</div><div id="d2" class="dart">-</div>
                <button class="miss" onclick="hit(0,1)">MISS</button>
            </div>
            <button id="btn-sub" class="btn-main" style="opacity:0.3; pointer-events:none;" onclick="nextTurn()">Submit Turn</button>
            <div class="undo" onclick="undo()">Undo Last Dart</div>
        </div>
    </div>

    <div id="scr-win" class="screen">
        <div class="hero"><p style="color:var(--dim)">CHAMPION</p><h1 id="winner">PLAYER</h1></div>
        <button class="btn-main" onclick="location.reload()">New Game</button>
    </div>
</div>

<script>
    let players = [], turnIdx = 0, darts = [], marksHist = [];
    const nums = [20, 19, 18, 17, 16, 15, 25];
    const sequence = [20, 1, 18, 4, 13, 6, 10, 15, 2, 17, 3, 19, 7, 16, 8, 11, 14, 9, 12, 5];

    function toggleTheme() {
        const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', theme);
        document.getElementById('t-toggle').innerText = theme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
    }

    function nav(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    function startCricket() {
        players = [
            { name: (document.getElementById('p1-in').value || "P1").toUpperCase(), score: 0, marks: {20:0,19:0,18:0,17:0,16:0,15:0,25:0} },
            { name: (document.getElementById('p2-in').value || "P2").toUpperCase(), score: 0, marks: {20:0,19:0,18:0,17:0,16:0,15:0,25:0} }
        ];
        document.getElementById('name-0').innerText = players[0].name;
        document.getElementById('name-1').innerText = players[1].name;
        drawBoard();
        updateUI();
        nav('scr-cricket');
    }

    function drawBoard() {
        const g = document.getElementById('segments'); g.innerHTML = "";
        sequence.forEach((v, i) => {
            const angle = (i * 18) - 90 - 9;
            const arc = (r1, r2, cls, m) => {
                const rad = Math.PI/180;
                const x1 = 100+r1*Math.cos(angle*rad), y1 = 100+r1*Math.sin(angle*rad);
                const x2 = 100+r1*Math.cos((angle+18)*rad), y2 = 100+r1*Math.sin((angle+18)*rad);
                const x3 = 100+r2*Math.cos((angle+18)*rad), y3 = 100+r2*Math.sin((angle+18)*rad);
                const x4 = 100+r2*Math.cos(angle*rad), y4 = 100+r2*Math.sin(angle*rad);
                return `<path d="M${x1},${y1} A${r1},${r1} 0 0,1 ${x2},${y2} L${x3},${y3} A${r2},${r2} 0 0,0 ${x4},${y4} Z" class="${cls}" onclick="hit(${v},${m})"/>`;
            };
            g.innerHTML += arc(82, 74, i%2? 'db-green':'db-red', 2);
            g.innerHTML += arc(74, 52, i%2? 'db-seg-even':'db-seg-odd', 1);
            g.innerHTML += arc(52, 44, i%2? 'db-green':'db-red', 3);
            g.innerHTML += arc(44, 12, i%2? 'db-seg-even':'db-seg-odd', 1);
            const tx = 100+92*Math.cos((angle+9)*Math.PI/180), ty = 100+92*Math.sin((angle+9)*Math.PI/180);
            g.innerHTML += `<text x="${tx}" y="${ty}" class="db-text" text-anchor="middle">${v}</text>`;
        });
    }

    function hit(v, m) {
        if (darts.length >= 3) return;
        let p = players[turnIdx], opp = players[1-turnIdx];
        marksHist.push({pScore: p.score, pMarks: {...p.marks}}); // For undo
        
        if (nums.includes(v)) {
            for(let i=0; i<m; i++) {
                if(p.marks[v] < 3) p.marks[v]++;
                else if(opp.marks[v] < 3) p.score += v;
            }
        }
        darts.push(v * m);
        updateUI();
        checkWin();
    }

    function undo() {
        if (darts.length === 0) return;
        let last = marksHist.pop();
        players[turnIdx].score = last.pScore;
        players[turnIdx].marks = last.pMarks;
        darts.pop();
        updateUI();
    }

    function updateUI() {
        document.getElementById('col-0').classList.toggle('active', turnIdx === 0);
        document.getElementById('col-1').classList.toggle('active', turnIdx === 1);
        players.forEach((p, pi) => {
            document.getElementById(`pts-${pi}`).innerText = p.score;
            nums.forEach(n => {
                let m = p.marks[n], sym = "-";
                if(m===1) sym="/"; if(m===2) sym="X"; if(m>=3) sym="‚ìß";
                const el = document.getElementById(`m${pi}-${n}`);
                el.innerText = sym;
                el.style.color = m >= 3 ? "var(--accent)" : "var(--text)";
            });
        });
        [0,1,2].forEach(i => document.getElementById(`d${i}`).innerText = darts[i] ?? "-");
        document.getElementById('btn-sub').style.opacity = darts.length === 3 ? "1" : "0.3";
        document.getElementById('btn-sub').style.pointerEvents = darts.length === 3 ? "auto" : "none";
    }

    function nextTurn() { turnIdx = 1 - turnIdx; darts = []; marksHist = []; updateUI(); }

    function checkWin() {
        let p = players[turnIdx], opp = players[1-turnIdx];
        if (nums.every(n => p.marks[n] >= 3) && p.score >= opp.score) {
            document.getElementById('winner').innerText = p.name;
            nav('scr-win');
        }
    }
</script>
</body>
</html>