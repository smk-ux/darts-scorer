<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Darts PRO | Sree</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #00ff88; --bg: #000; --surf: #0a0a0a; --text: #fff; --dim: #666; --border: #1a1a1a; --danger: #ff4444; --nav-bg: rgba(255,255,255,0.05); }
        [data-theme="light"] { --bg: #f5f5f7; --surf: #fff; --text: #1d1d1f; --dim: #86868b; --border: #e0e0e0; --accent: #00bd65; --nav-bg: rgba(0,0,0,0.03); }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; transition: background 0.3s, color 0.3s; }
        body, html { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; height: 100vh; overflow: hidden; }
        .app-container { height: 100%; display: flex; flex-direction: column; padding: 15px; max-width: 500px; margin: 0 auto; position: relative; }
        .screen { display: none; flex-direction: column; height: 100%; }
        .screen.active { display: flex; }

        /* Side Menu */
        .side-menu { position: fixed; top: 0; left: -280px; width: 280px; height: 100%; background: var(--surf); z-index: 1000; transition: 0.4s; padding: 50px 30px; border-right: 1px solid var(--border); }
        .side-menu.open { left: 0; box-shadow: 20px 0 80px rgba(0,0,0,0.5); }
        .menu-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: none; z-index: 999; backdrop-filter: blur(4px); }
        .menu-item { padding: 20px 0; font-size: 1rem; border-bottom: 1px solid var(--border); cursor: pointer; display: flex; align-items: center; gap: 15px; }
        .menu-item span { color: var(--accent); font-weight: 900; font-size: 0.7rem; }

        /* Navigation */
        .top-nav { display: flex; justify-content: space-between; align-items: center; height: 50px; flex-shrink: 0; }
        .nav-btn { width: 42px; height: 42px; background: var(--nav-bg); border-radius: 12px; border: 1px solid var(--border); display: flex; justify-content: center; align-items: center; cursor: pointer; }

        /* Home Screen Branding */
        .hero { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
        .hero h1 { font-size: 4rem; font-weight: 900; letter-spacing: -3px; line-height: 0.9; }
        .hero h1 span { color: var(--accent); }
        .hero-sub { color: var(--dim); font-size: 0.7rem; letter-spacing: 4px; text-transform: uppercase; margin-top: 10px; }

        /* Cricket Vertical Layout */
        .cricket-grid { display: flex; flex-direction: row; justify-content: space-between; align-items: center; flex-grow: 1; width: 100%; gap: 10px; margin: 10px 0; }
        .player-col { width: 65px; display: flex; flex-direction: column; gap: 5px; align-items: center; opacity: 0.25; transition: 0.3s; }
        .player-col.active { opacity: 1; transform: scale(1.05); }
        .p-total { font-size: 1.5rem; font-weight: 900; color: var(--accent); }
        .mark-row { width: 45px; height: 38px; background: var(--surf); border: 1px solid var(--border); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 1.2rem; }
        .mark-num { font-size: 0.6rem; color: var(--dim); font-weight: 800; margin-bottom: 2px; }

        /* Center Board */
        .board-center { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden; }
        #dartboard-svg { width: 100%; max-width: 280px; height: auto; }
        .db-bg { fill: var(--text); }
        .db-seg-even { fill: #111; stroke: #222; stroke-width: 0.2; }
        .db-seg-odd { fill: #050505; stroke: #222; stroke-width: 0.2; }
        .db-red { fill: #8b0000; }
        .db-green { fill: #004d2c; }
        .db-highlight { fill: var(--accent) !important; }
        .db-text { fill: #666; font-size: 6px; font-weight: 700; pointer-events: none; }

        /* Bottom UI */
        .score-strip { display: flex; gap: 10px; margin-bottom: 15px; justify-content: center; }
        .dart-slot { width: 65px; height: 55px; background: var(--surf); border: 1px solid var(--border); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-weight: 900; color: var(--accent); font-size: 1.3rem; }
        .miss-btn { width: 65px; height: 55px; background: var(--danger); border-radius: 12px; border: none; color: #fff; font-size: 0.7rem; font-weight: 900; cursor: pointer; }
        .cta { width: 100%; padding: 22px; background: var(--text); color: var(--bg); border-radius: 16px; font-weight: 900; text-transform: uppercase; border: none; font-size: 0.9rem; cursor: pointer; letter-spacing: 1px; }
        .cta-submit { width: 100%; padding: 20px; background: var(--accent); color: #000; border-radius: 16px; font-weight: 900; border: none; text-transform: uppercase; cursor: pointer; }
        .undo-txt { color: var(--dim); font-size: 0.7rem; text-align: center; margin-top: 15px; cursor: pointer; text-transform: uppercase; }

        /* Inputs */
        .name-input { width: 100%; background: var(--surf); border: 1px solid var(--border); padding: 20px; color: var(--text); border-radius: 12px; margin-bottom: 15px; text-align: center; font-weight: 700; }
    </style>
</head>
<body>

<div class="menu-overlay" id="overlay" onclick="toggleMenu()"></div>
<div class="side-menu" id="side-menu">
    <div class="menu-item" onclick="toggleTheme()"><span>01</span> THEME LIGHT/DARK</div>
    <div class="menu-item" onclick="location.reload()"><span>02</span> RESET APP</div>
    <div class="menu-item" onclick="alert('01 Rules: Reach 0 exactly. Cricket: Close 15-20 & Bullseye.')"><span>03</span> HELP</div>
</div>

<div class="app-container">
    <div class="top-nav">
        <div class="nav-btn" onclick="toggleMenu()"><svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"/></svg></div>
        <div class="hero-sub" style="font-size: 0.6rem;">DARTS PRO</div>
        <div class="nav-btn" onclick="toggleTheme()" id="theme-btn">ðŸŒ™</div>
    </div>

    <div id="scr-welcome" class="screen active">
        <div class="hero">
            <h1>Darts <span>PRO</span></h1>
            <div class="hero-sub">Engineered by Sree</div>
        </div>
        <button class="cta" onclick="nav('scr-setup')">Start Game</button>
    </div>

    <div id="scr-setup" class="screen">
        <div class="hero" style="flex-grow:0; margin: 40px 0;"><div class="hero-sub">Enter Player Names</div></div>
        <input type="text" id="p1-name" class="name-input" placeholder="PLAYER 1">
        <input type="text" id="p2-name" class="name-input" placeholder="PLAYER 2">
        <div style="flex-grow:1"></div>
        <button class="cta" onclick="initGame()">Begin Cricket</button>
    </div>

    <div id="scr-game" class="screen">
        <div class="cricket-grid">
            <div id="col-0" class="player-col">
                <div id="n0" style="font-size:0.6rem; font-weight:800; color:var(--dim)">P1</div>
                <div id="pts-0" class="p-total">0</div>
                <div class="mark-num">20</div><div id="m0-20" class="mark-row">-</div>
                <div class="mark-num">19</div><div id="m0-19" class="mark-row">-</div>
                <div class="mark-num">18</div><div id="m0-18" class="mark-row">-</div>
                <div class="mark-num">17</div><div id="m0-17" class="mark-row">-</div>
                <div class="mark-num">16</div><div id="m0-16" class="mark-row">-</div>
                <div class="mark-num">15</div><div id="m0-15" class="mark-row">-</div>
                <div class="mark-num">B</div><div id="m0-25" class="mark-row">-</div>
            </div>

            <div class="board-center">
                <div id="turn-label" style="font-size: 0.7rem; color: var(--accent); font-weight: 800; margin-bottom: 10px;">PLAYER 1 TURN</div>
                <svg id="dartboard-svg" viewBox="0 0 200 200">
                    <circle cx="100" cy="100" r="98" class="db-bg"/>
                    <g id="segs"></g>
                    <circle id="s25" cx="100" cy="100" r="12" class="db-green" onclick="hit(25, 1)"/>
                    <circle id="d25" cx="100" cy="100" r="6" class="db-red" onclick="hit(25, 2)"/>
                </svg>
            </div>

            <div id="col-1" class="player-col">
                <div id="n1" style="font-size:0.6rem; font-weight:800; color:var(--dim)">P2</div>
                <div id="pts-1" class="p-total">0</div>
                <div class="mark-num">20</div><div id="m1-20" class="mark-row">-</div>
                <div class="mark-num">19</div><div id="m1-19" class="mark-row">-</div>
                <div class="mark-num">18</div><div id="m1-18" class="mark-row">-</div>
                <div class="mark-num">17</div><div id="m1-17" class="mark-row">-</div>
                <div class="mark-num">16</div><div id="m1-16" class="mark-row">-</div>
                <div class="mark-num">15</div><div id="m1-15" class="mark-row">-</div>
                <div class="mark-num">B</div><div id="m1-25" class="mark-row">-</div>
            </div>
        </div>

        <div class="score-strip">
            <div id="d0" class="dart-slot">-</div><div id="d1" class="dart-slot">-</div><div id="d2" class="dart-slot">-</div>
            <button class="miss-btn" onclick="hit(0,1)">MISS</button>
        </div>
        <button id="sub-btn" class="cta-submit" style="opacity:0.3; pointer-events:none;" onclick="confirmTurn()">Submit Turn</button>
        <p class="undo-txt" onclick="undo()">Undo last dart</p>
    </div>

    <div id="scr-win" class="screen">
        <div class="hero">
            <div class="hero-sub">Winner</div>
            <h1 id="winner-name" style="color:var(--accent)">-</h1>
        </div>
        <button class="cta" onclick="location.reload()">Play Again</button>
    </div>
</div>

<script>
    let players = [], turn = 0, darts = [], marksHist = [];
    const targets = [20, 19, 18, 17, 16, 15, 25];
    const sequence = [20, 1, 18, 4, 13, 6, 10, 15, 2, 17, 3, 19, 7, 16, 8, 11, 14, 9, 12, 5];

    function toggleMenu() {
        const menu = document.getElementById('side-menu');
        const overlay = document.getElementById('overlay');
        menu.classList.toggle('open');
        overlay.style.display = menu.classList.contains('open') ? 'block' : 'none';
    }

    function toggleTheme() {
        const root = document.documentElement;
        const current = root.getAttribute('data-theme');
        const next = current === 'dark' ? 'light' : 'dark';
        root.setAttribute('data-theme', next);
        document.getElementById('theme-btn').innerText = next === 'dark' ? 'ðŸŒ™' : 'â˜€ï¸';
        if(document.getElementById('side-menu').classList.contains('open')) toggleMenu();
    }

    function nav(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    function initGame() {
        players = [
            { name: (document.getElementById('p1-name').value || "P1").toUpperCase(), score: 0, marks: {20:0,19:0,18:0,17:0,16:0,15:0,25:0} },
            { name: (document.getElementById('p2-name').value || "P2").toUpperCase(), score: 0, marks: {20:0,19:0,18:0,17:0,16:0,15:0,25:0} }
        ];
        document.getElementById('n0').innerText = players[0].name;
        document.getElementById('n1').innerText = players[1].name;
        drawBoard();
        updateUI();
        nav('scr-game');
    }

    function drawBoard() {
        const g = document.getElementById('segs');
        g.innerHTML = "";
        sequence.forEach((v, i) => {
            const angle = (i * 18) - 90 - 9;
            const drawArc = (r1, r2, cls, m) => {
                const rad = Math.PI / 180;
                const x1 = 100 + r1 * Math.cos(angle * rad), y1 = 100 + r1 * Math.sin(angle * rad);
                const x2 = 100 + r1 * Math.cos((angle+18) * rad), y2 = 100 + r1 * Math.sin((angle+18) * rad);
                const x3 = 100 + r2 * Math.cos((angle+18) * rad), y3 = 100 + r2 * Math.sin((angle+18) * rad);
                const x4 = 100 + r2 * Math.cos(angle * rad), y4 = 100 + r2 * Math.sin(angle * rad);
                return `<path d="M${x1},${y1} A${r1},${r1} 0 0,1 ${x2},${y2} L${x3},${y3} A${r2},${r2} 0 0,0 ${x4},${y4} Z" class="${cls}" onclick="hit(${v}, ${m})"/>`;
            };
            g.innerHTML += drawArc(82, 74, i%2?'db-green':'db-red', 2);
            g.innerHTML += drawArc(74, 52, i%2?'db-seg-even':'db-seg-odd', 1);
            g.innerHTML += drawArc(52, 44, i%2?'db-green':'db-red', 3);
            g.innerHTML += drawArc(44, 12, i%2?'db-seg-even':'db-seg-odd', 1);
            const tx = 100 + 92 * Math.cos((angle + 9) * Math.PI / 180), ty = 100 + 92 * Math.sin((angle + 9) * Math.PI / 180);
            g.innerHTML += `<text x="${tx}" y="${ty}" class="db-text" text-anchor="middle" dominant-baseline="middle">${v}</text>`;
        });
    }

    function hit(v, m) {
        if (darts.length >= 3) return;
        let p = players[turn], opp = players[1-turn];
        marksHist.push({score: p.score, marks: JSON.parse(JSON.stringify(p.marks))});
        
        if (targets.includes(v)) {
            for(let i=0; i<m; i++) {
                if(p.marks[v] < 3) p.marks[v]++;
                else if(opp.marks[v] < 3) p.score += v;
            }
        }
        darts.push(v * m);
        updateUI();
        checkWin();
    }

    function undo() {
        if(darts.length === 0) return;
        let prev = marksHist.pop();
        players[turn].score = prev.score;
        players[turn].marks = prev.marks;
        darts.pop();
        updateUI();
    }

    function updateUI() {
        document.getElementById('col-0').classList.toggle('active', turn === 0);
        document.getElementById('col-1').classList.toggle('active', turn === 1);
        document.getElementById('turn-label').innerText = `${players[turn].name} TURN`;

        players.forEach((p, pi) => {
            document.getElementById(`pts-${pi}`).innerText = p.score;
            targets.forEach(t => {
                let m = p.marks[t], sym = "-";
                if(m===1) sym="/"; if(m===2) sym="X"; if(m>=3) sym="â“§";
                let el = document.getElementById(`m${pi}-${t}`);
                el.innerText = sym;
                el.style.color = m >= 3 ? "var(--accent)" : "var(--text)";
            });
        });

        [0,1,2].forEach(i => document.getElementById(`d${i}`).innerText = darts[i] ?? "-");
        document.getElementById('sub-btn').style.opacity = darts.length === 3 ? "1" : "0.3";
        document.getElementById('sub-btn').style.pointerEvents = darts.length === 3 ? "auto" : "none";
    }

    function confirmTurn() {
        turn = 1 - turn;
        darts = [];
        marksHist = [];
        updateUI();
    }

    function checkWin() {
        let p = players[turn], opp = players[1-turn];
        if (targets.every(t => p.marks[t] >= 3) && p.score >= opp.score) {
            document.getElementById('winner-name').innerText = p.name;
            nav('scr-win');
        }
    }
</script>
</body>
</html>